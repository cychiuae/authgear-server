{{ template "authflowv2/__settings_page_frame.html" . }}

{{ define "page-navbar" }}
  {{ template "authflowv2/__navbar.html"
    (dict
        "BackTitle" (translate "v2.component.navbar.default.item-back-button-label" nil)
        "BackHref" (call $.MakeURL "/settings")
        "Title" (translate "v2.page.settings-biometric.default.navbar-title" nil)
    )
  }}
{{ end }}

{{ define "page-content" }}
<div class="flex flex-col">

  {{ if not $.BiometricIdentities }}
    <p class="settings-description text-center">
      {{ template "v2.page.settings-biometric.default.description-no-biometric" . }}
    </p>
  {{ end }}

  {{ $ctx := .}}
  {{ range $.BiometricIdentities }}
    <div class="settings-item--with-remove-btn">
      <i class="settings-item_icon material-icons">
        phone_iphone
      </i>
      <p class="settings-item__label">
        {{ if .DisplayName }}
          {{ .DisplayName }}
        {{ else }}
          {{ template "v2.page.settings-biometric.default.item-label-unknown-name" . }}
        {{ end }}
      </p>
      <p class="settings-item__description settings-description">
        {{ template "v2.page.settings-biometric.default.item-description" (dict "time" .CreatedAt "rfc3339" (rfc3339 .CreatedAt)) }}
      </p>
      <button
        class="settings-item__remove-btn"
        data-controller="settings-dialog"
        data-action="click->settings-dialog#open"
      >
        {{ template "v2.page.settings-biometric.default.button-label-disconnect" . }}
      </button>
      {{ template "authflowv2/__settings_dialog.html"
        (dict
          "Ctx" $ctx
          "Title" (include "v2.page.settings-biometric.default.dialog-title" nil)
          "Description" (include "v2.page.settings-biometric.default.dialog-description" nil)
          "FormContent" (include "remove-biometric-input" (dict "BiometricID" .ID))
          "Buttons"
            (list
              (dict
                "Type" "Destructive"
                "Label" (include "v2.component.button.default.label-remove" nil)
                "Value" "remove"
                "Event" "authgear.button.remove_biometric"
              )
              (dict
                "Type" "Cancel"
                "Label" (include "v2.component.button.default.label-cancel" nil)
              )
            )
      )}}
    </div>
  {{ end }}

</div>
{{end}}

{{ define "remove-biometric-input" }}
  <input type="hidden" name="q_identity_id" value="{{ $.BiometricID }}">
{{ end }}

